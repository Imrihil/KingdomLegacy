using FluentAssertions;
using KingdomLegacy.Domain;

namespace KingdomLegacy.Tests;

public class GameTests
{
    private readonly Game _game = new();

    [Fact]
    public void Should_ImportGame()
    {
        _game.Load(@"Test
1
FeudalKingdom
0	1	7
1	1	2
2	1	4
3	1	2
4	1	2
5	2	4
6	2	2
7	1	2
8	1	2
9	1	4
10	2	2
11	1	2
12	1	4
13	1	0
14	1	0
15	1	0
16	1	0
17	1	0");

        _game.IsInitialized.Should().BeTrue();
        _game.BoxCount.Should().Be(127);
        _game.DeckCount.Should().Be(8);
        _game.StayInPlay.Count.Should().Be(0);
        _game.Played.Count.Should().Be(4);
        _game.Discarded.Count.Should().Be(0);
        _game.Destroyed.Count.Should().Be(1);
        _game.Purged.Count.Should().Be(0);
        _game.Points.Should().Be(1);
    }

    [Fact]
    public void Should_ImportGame2()
    {
        _game.Load(@"Tests's Kingdom
243
FeudalKingdom
77	1	0
79	1	0
80	1	0
81	1	0
87	1	0
89	1	0
92	1	0
93	1	0
94	1	0
95	1	0
96	1	0
102	1	0
106	1	0
107	1	0
108	1	0
116	1	0
117	1	0
118	1	0
122	1	0
123	1	0
124	1	0
125	1	0
129	1	0
130	1	0
131	1	0
132	1	0
133	1	0
134	1	0
135	1	0
136	1	0
137	1	0
138	1	0
139	1	0
27	1	8	0;7;314	0;6;338	0;8;364	0;11;390	10;29;212	10;80;211	0;7;415	10;130;210
26	1	8	0;21;337	0;78;336	0;133;326	0;205;339	0;237;335	0;299;334	0;23;429
91	1	8	0;36;410	0;103;403
88	1	8	0;46;342	0;117;342
90	1	8	0;15;338
25	1	8	0;58;339	0;106;333
39	1	8
38	1	8
40	1	8
68	-1	5
13	1	6
63	1	6
75	-1	6
1	-1	6	1;-129;-79	3;-61;-133	4;-119;-131
98	2	6	0;14;198	0;54;197	0;96;193	0;144;191	0;181;202	0;225;196	0;309;193	0;265;195	0;223;275	0;267;271	0;304;271	0;179;271	0;135;269
104	-1	6
46	-2	6
54	1	6
109	2	6
62	2	6
9	2	6
36	-1	6	5;-84;-80	0;-85;-341
18	2	6
126	-2	6
101	2	6	2;199;390	6;195;335	10;255;262	4;135;397
7	-2	6
78	1	6
105	-2	6
100	2	6	4;200;388
115	1	6
15	-2	6
121	1	6
34	1	6	0;101;454	0;159;456	0;219;453	10;17;130	10;70;130	10;120;131
127	1	6
41	-1	6	0;-12;-370	0;-54;-369	0;-98;-366	0;-142;-373	0;-181;-370	0;-226;-367
73	2	6
66	-1	6
11	-2	6
43	-2	6
83	2	6
85	-2	6
120	-1	6
10	-1	6
55	-1	6	0;-14;-463	0;-139;-457	0;-97;-457	7;-100;-257	0;-51;-454	1;-16;-150	5;-81;-83	11;-97;-47
74	1	6
12	-1	6
3	-2	6	1;-189;-387
44	1	6
67	-1	6
21	-1	6
29	1	6	6;80;83
97	-2	6
20	-1	6
76	-1	6
6	-1	6
42	1	6
114	1	6
48	-1	6
112	-2	6
84	-2	6
82	-1	6
52	2	6
28	-2	6	0;-8;-458	2;-302;-380	0;-9;-410	0;-9;-363	2;-247;-379	0;-6;-321	0;-6;-266	2;-301;-322
70	-1	6
99	1	6
50	-2	6
128	1	6
69	1	7
64	1	7
0	-1	7
23	-1	7
24	-1	7
5	2	7
32	1	7
31	1	7
30	-1	7
8	-2	7
19	-1	7
2	-1	7
37	-1	7
47	-1	7
49	1	7
51	1	7
110	1	7
103	1	7
53	-1	7
111	1	7
119	1	7
16	-1	7
45	-1	7
56	-1	7
35	-1	7
4	-1	7
14	-1	7
72	-1	7
57	-1	7
71	-1	7
59	2	7
113	1	7
60	1	7
58	-1	7
61	1	7
17	-2	7
22	-2	7
33	-1	7
65	-1	7
86	-1	7");

        _game.Points.Should().Be(243);
    }
}